{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Playlist</title>
    <link href='{% static "css/bootstrap.min.css"%}' rel='stylesheet' type='text/css' />
    <link href='{% static "css/style.css"%}' rel='stylesheet' type='text/css' />
    <link rel="stylesheet" href="https://pro.fontawesome.com/releases/v5.10.0/css/all.css" integrity="sha384-AYmEC3Yw5cVb3ZcuHtOA93w35dYTsvhLPVnYs9eStHfGJvOvKxVfELGroGkvsg+p" crossorigin="anonymous"/>
    <script src='{% static "js/jquery.min.js"%}'></script>
    <script src='{% static "js/popper.min.js"%}'></script>
    <script src='{% static "js/bootstrap.min.js"%}'></script>
    <script src="https://code.jquery.com/jquery-2.2.0.js"></script>
    <script src='{% static "js/audioPlayer.js"%}'></script>
    <style>
        #playlist{
            list-style: none;
        }
        #playlist li a{
            color:black;
            text-decoration: none;
        }
        #playlist .current-song a{
            color:Green;
        }
    </style>
</head>
<body>
<div class="container">
    <h3>{{ request.user.first_name }} your playlist:</h3>
    <hr>
    <center>
    <audio src="" controls id="audioPlayer">
        Sorry, your browser doesn't support html5!
    </audio>
    </center>

    <table class="table table-hover">
        <thead>
            <tr>
                <th>Index</th>
                <th>Name</th>
                <th>Artist</th>
                <th>Movie</th>
                <th>Play</th>
            </tr>
        </thead>
    <tbody>
    {% for song in songs %}

        <tr id="playlist">
            <td>{{ forloop.counter }}</td>
            <td>{{song.song_id.name}}</td>
            <td>{{song.song_id.artist}}</td>
            <td>{{song.song_id.movie}}</td>
            <td class="current-song"><a class="test" href="media/{{song.song_id.song_file}}" id="link_id{{forloop.counter}}"><i class="fa fa-play-circle fa-2x" aria-hidden="true"></i></a></td>
      </tr>
    {% endfor %}
    </tbody>
  </table>
     <button type="button" class="btn btn-outline-primary" onclick="audioPlayer()">Shuffle Play &blacktriangleright; </button>
    <a href="/"><button type="button" class="btn btn-outline-primary">&blacktriangleleft; Back</button></a>
</div>


   <script>
        audioPlayer();
    </script>
<script>

        function count(){
            var elements = document.getElementsByClassName("test");
            var data = []
            for (var i =0 ;i < elements.length;i++)
            {
                   data.push(elements[i])
            }
            shuffle(data)
        };

        function shuffle(data) {

              var currentIndex = data.length, temporaryValue, randomIndex;


              // While there remain elements to shuffle...
              while (0 !== currentIndex) {

                // Pick a remaining element...
                randomIndex = Math.floor(Math.random() * currentIndex);
                currentIndex -= 1;

                // And swap it with the current element.
                temporaryValue = data[currentIndex];
                data[currentIndex] = data[randomIndex];
                data[randomIndex] = temporaryValue;
              }
              return data;
        }
</script>
</body>
</html>